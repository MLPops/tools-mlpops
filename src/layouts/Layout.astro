---
export interface Props {
  site: string;
  title: string;
  tagline: string;
}

const { site, title, tagline } = Astro.props;
---

<!doctype html>
<html lang="ru" data-new-ui-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/icon.png" />
    <script src="./theme.js"></script>
    <meta name="generator" content={Astro.generator} />
    <title>{site} — Откройте для себя инструменты ML и MLOps</title>
    <meta name="author" content="MLPops">
    <meta name="description" content="Откройте для себя инструменты ML и MLOps">
    <meta property="og:title" content="MLOps инструменты">
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Откройте для себя инструменты ML и MLOps.">
    <meta property="og:image" content="https://tools.mlpops.ru/og.png">
    <meta property="og:url" content="https://tools.mlpops.ru/">
    <meta name="twitter:card" content="summary_large_image">
  </head>

  <body>
		<div class="floating-nav" aria-label="main navigation">
			<div class="logo">
				<a href="/" aria-label="home page" tabindex="-1"><img src="/icon.png" width="24" height="24" alt="Rise of Machine" aria-hidden="true"></a>
			</div>
      <div class="btn-group">
        <a href="https://github.com/MLPops/tools-mlpops"
        target="_blank"
        style="padding: 4px 5px;"
        class="submit-btn"
        tabindex="0">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24">
          <path fill="var(--icon-secondary)" d="M10.9,2.1c-4.6,0.5-8.3,4.2-8.8,8.7c-0.6,5,2.5,9.3,6.9,10.7v-2.3c0,0-0.4,0.1-0.9,0.1c-1.4,0-2-1.2-2.1-1.9 c-0.1-0.4-0.3-0.7-0.6-1C5.1,16.3,5,16.3,5,16.2C5,16,5.3,16,5.4,16c0.6,0,1.1,0.7,1.3,1c0.5,0.8,1.1,1,1.4,1c0.4,0,0.7-0.1,0.9-0.2 c0.1-0.7,0.4-1.4,1-1.8c-2.3-0.5-4-1.8-4-4c0-1.1,0.5-2.2,1.2-3C7.1,8.8,7,8.3,7,7.6C7,7.2,7,6.6,7.3,6c0,0,1.4,0,2.8,1.3 C10.6,7.1,11.3,7,12,7s1.4,0.1,2,0.3C15.3,6,16.8,6,16.8,6C17,6.6,17,7.2,17,7.6c0,0.8-0.1,1.2-0.2,1.4c0.7,0.8,1.2,1.8,1.2,3 c0,2.2-1.7,3.5-4,4c0.6,0.5,1,1.4,1,2.3v3.3c4.1-1.3,7-5.1,7-9.5C22,6.1,16.9,1.4,10.9,2.1z"></path>
      </svg>
        </a>

				<a
					href="https://forms.gle/hYCcTYSCKKNAxHtY7"
					target="_blank"
					class="submit-btn"
          tabindex="0"
          >Рекомендовать</a
				>
				<button
					class="theme-toggle"
					id="theme-toggle"
					title="Toggles light & dark"
					aria-label="auto"
					aria-live="polite"
				>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						fill="none"
						><path
							stroke="var(--icon-secondary)"
							stroke-linecap="round"
							stroke-miterlimit="10"
							stroke-width="1.5"
							d="M12 4V2M3 13H1m22 0h-2m-1.222-7.778-1.414 1.414m-12.728 0L4.222 5.222M4 18h16M8 21h8m-7.43-3.07A5.98 5.98 0 0 1 6 13c0-3.31 2.69-6 6-6s6 2.69 6 6c0 2.05-1.03 3.86-2.6 4.94l-6.83-.01Z"
						></path></svg
					>
				</button>
			</div>
    </div>

    <header class="nu-u-mb-10 nu-u-mt-10">
      <div class="container">
        <h1 class="nu-c-h3 nu-u-text--primary nu-u-mt-0 nu-u-mb-2 title">
          {title}
        </h1>
        <p class="nu-c-fs-normal nu-u-text--secondary description-text">{tagline}</p>
      </div>
    </header>
    <slot />

    <div class="footer">
      <p>Сделали <a href="https://t.me/ml_pops" class="nu-u-link--subtle" target="_blank">@ml_pops</a>. <br /> </p>
    </div>

  </body>
</html>
<style is:global>
  :root {
    --accent: var(--support-info);
  }
  html {
    font-family: var(--system-ui);
    background-color: var(--background);
  }
  body {
    margin: 0;
    padding: 0;
		width: 100%;
		overflow-x: hidden;
  }
  main,
  .container {
    margin: var(--spacing-09);
  }
  section {
    margin-bottom: var(--spacing-10);
  }
  p {
    margin-top: var(--spacing-00);
  }
  p.description-text {
    max-inline-size: 37.5rem;
  }
  .nu-u-link--subtle {
    color: var(--text-secondary) !important;
  }
  .floating-nav {
    padding: var(--spacing-06) var(--spacing-09);
		top: 0;
		left: 0;
		right: 0;
		display: flex;
		justify-content: space-between;
		align-items: center;
    z-index: 999999;
  }
	.floating-nav.is-active {
		position: -webkit-sticky;
		position: sticky;
		animation-name: slideDownNavigation;
		animation-duration: 200ms;
		animation-timing-function: cubic-bezier(0.075, 0.82, 0.165, 1);
		animation-fill-mode: both;
		animation-iteration-count: 1;
    background-color: var(--background);
    --shadow-color: rgb(0 0 0 / 0.04);
    box-shadow: 0px 0px 0px 0px var(--shadow-color),
    0px 1px 1px -0.5px var(--shadow-color),
    0px 3px 3px -1.5px var(--shadow-color);
	}
	@keyframes slideDownNavigation {
		from {
			top: -20px;
			opacity: 0.5;
		}

		to {
			top: 0;
			opacity: 1;
		}
	}
  .btn-group {
    display: flex;
    gap: var(--spacing-03);
    align-items: center;
  }
  .submit-btn {
    padding: .5625rem .9375rem;
    border: 1px solid var(--border-muted);
    outline: none;
    text-decoration: none;
    color: inherit;
    cursor: pointer;
    color: var(--text-secondary);
    background-color: var(--background);
    border-radius: var(--spacing-03);
    font-size: var(--desktop-body-sm);

    &:hover {
      background-color: var(--background-secondary);
      color: var(--text-primary);
    }

    &:active {
      background-color: var(--background);
      color: var(--text-secondary);
    }

    &.disabled {
      background-color: var(--background);
      color: var(--icon-secondary);
      pointer-events: none;
    }

    &:focus {
      background-color: var(--background);
      outline: 1px solid var(--button-primary);
      color: var(--icon-secondary);
    }
  }
  .theme-toggle {
    z-index: 999;
    --icon-fill: var(--icon-secondary);
    --icon-fill-hover: var(--icon-secondary);
    width: var(--spacing-09);
    height: var(--spacing-09);
    background: none;
    border: none;
    padding: var(--spacing-00);
    color: var(--icon-secondary);
    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: var(--spacing-02);

    @nest [data-theme="dark"] & {
      --icon-fill: var(--icon-secondary);
      --icon-fill-hover: var(--icon-secondary);
    }
  }
  .footer p{
    padding-bottom: var(--spacing-10);
    text-align: center;
    font-weight: normal;
    font-style: normal;
    color: var(--text-secondary-alt);
    font-size: var(--desktop-body-sm);
    line-height: var(--lh-desktop-body);
  }

  @media (max-width: 30rem) {
    main {margin: auto var(--spacing-06);}
    .floating-nav { padding: var(--spacing-06) var(--spacing-06);}
    .container { margin: var(--spacing-06);}
  }
  
  /* logo animation */
  .logo {
    transition: all .2s ease-out;
    padding-top: var(--spacing-03);
  }
  .logo:hover {
    animation: buzz 0.32s linear 2;
    transform: scale(1.1) translateZ(0);
    filter: brightness(1.1);
  }
  @keyframes buzz {
    50% {
      transform: translateX(3px) rotate(2deg);
    }
    100% {
      transform: translateX(-3px) rotate(-2deg);
    }
  }
  @supports (not (animation: buzz)) {
    .logo:hover {
      -webkit-animation: buzz 0.32s linear 2;
    }
  }
  @media (prefers-reduced-motion: reduce) {
    .logo:hover {
      animation: none;
      transform: scale(1.2);
    }
  }
</style>
  
<script>
history.scrollRestoration = "manual";
window.onbeforeunload = function () {
  window.scrollTo(0, 0);
};

const nav = document.querySelector('.floating-nav');
const pageCTA = document.querySelector('.floating-nav .submit-btn');
var pageCTAPosition = 0;
if (pageCTA) {
  pageCTAPosition = pageCTA.getBoundingClientRect().bottom;
}

var previousScrollPosition = 0;

const handleNavScroll = () => {
  let currentScrolledPosition = window.scrollY || window.pageYOffset;
  if (isScrollingDown()) {
    nav.classList.add("scroll-down");
    nav.classList.remove("scroll-up");
  } else {
    nav.classList.add("scroll-up");
    nav.classList.remove("scroll-down");
  }
  if (currentScrolledPosition > pageCTAPosition + 50) {
    if (!nav.classList.contains("is-active")) {
      nav.classList.add("is-active");
    }
  } else {
    if (nav.classList.contains("is-active")) {
      nav.classList.remove("is-active");
    }
  }
};

function isScrollingDown() {
  let currentScrolledPosition = window.scrollY || window.pageYOffset;
  let scrollingDown;
  if (currentScrolledPosition > previousScrollPosition) {
    scrollingDown = true;
  } else {
    scrollingDown = false;
  }
  previousScrollPosition = currentScrolledPosition;
  return scrollingDown;
}

var throttleWait;
function throttle(callback, time) {
  if (throttleWait) return;
  throttleWait = true;
  setTimeout(() => {
    callback();
    throttleWait = false;
  }, time);
}

window.addEventListener("scroll", () => {
  throttle(handleNavScroll, 80);
});
</script>
